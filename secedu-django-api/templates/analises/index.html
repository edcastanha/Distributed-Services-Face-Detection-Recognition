{% extends 'layouts/base.html' %}
{% block title %}SecEdu - Frequencia{% endblock title %}
{% block content %}
<div class="container-fluid px-4">
    <h1 class="mt-4">SecEdu</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Frequencia de Alunos</li>
    </ol>
  <div id='calendar-container'>
    <div id='calendar'></div>
  </div>
    
</div>
{% load static %}

    <script src="{% static 'calendar-20/js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'calendar-20/js/popper.min.js' %}"></script>
    <script src="{% static 'calendar-20/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'calendar-20/fullcalendar/packages/core/main.js' %}"></script>
    <script src="{% static 'calendar-20/fullcalendar/packages/interaction/main.js' %}"></script>
    <script src="{% static 'calendar-20/fullcalendar/packages/daygrid/main.js' %}"></script>
    <script src="{% static 'calendar-20/fullcalendar/packages/timegrid/main.js' %}"></script>
    <script src="{% static 'calendar-20/fullcalendar/packages/list/main.js' %}"></script>

    

    <script>
      document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    // Obter a data atual em formato ISO (YYYY-MM-DD)
    var currentDate = new Date().toISOString().slice(0, 10);

    var calendar = new FullCalendar.Calendar(calendarEl, {
      plugins: [ 'interaction', 'dayGrid', 'timeGrid', 'list' ],
      height: 'parent',
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
      },
      defaultView: 'dayGridMonth',
      defaultDate: currentDate,
      navLinks: true, // can click day/week names to navigate views
      editable: false,
      eventLimit: true, // allow "more" link when too many events
      events: [
        {% for result in results %}
          {
            title: '{{result.id}}',
            start: '{{result.dia}}',
            end: '{{result.dia}}',
            color: {% if result.auditado%}'blue'{% else %}'red'{% endif %}
          },
        {% endfor %}
      ]
    });

    calendar.render();
  });


    </script>
    <script src="{% static 'calendar-20/js/main.js' %}"></script>

{% endblock content %}
